"use strict";"require fs";"require poll";"require ui";"require view";return view.extend({async retrieveLog(){try{const response=await fetch("/cgi-bin/luci/admin/services/coovachilli/logs",{method:"GET",headers:{Accept:"text/plain"}});const logText=await response.text();const loglines=logText.trim().split(/\n/).slice(-500).filter(Boolean);return{value:loglines.join("\n"),rows:loglines.length+1}}catch(err){ui.addNotification(null,E("p",{},_("Tidak dapat memuat data log: "+err.message)));return{value:"Gagal memuat log",rows:1}}},async pollLog(){const el=document.getElementById("syslog");if(el){try{const log=await this.retrieveLog();el.value=log.value}catch(err){ui.addNotification(null,E("p",{},_("Gagal memperbarui log: "+err.message)))}}},load(){poll.add(this.pollLog.bind(this));return this.retrieveLog()},render(loglines){const resetButton=E("button",{id:"resetButton",class:"cbi-button cbi-button-reset"},_("Reset Log"));return E([],[E("div",{id:"content_syslog"},[E("div",{style:"padding-bottom: 10px"}),E("textarea",{id:"syslog",style:"font-size:12px; width:100%; height:400px; resize:vertical; overflow:auto;",readonly:"readonly",wrap:"off"},[loglines.value]),]),])},handleSaveApply:null,handleSave:null,handleReset:null,})